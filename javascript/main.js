const portfolioArray = [
    {
        name: "Tribe",
        url: "https://wearetribe.co/",
        tidyurl: "wearetribe.co",
        image: "images/team_assets/fund/tribe_image.jpg",
        logo: "images/team_assets/fund/tribe_logo.png",
        line: "Natural sports nutrition and an amazing community",
        copy: "We are a community of 50,000+ athletes brought together by a love of nature and a shared spirit for adventure. TRIBE was inspired by a 1,000 mile run across Europe to fight human trafficking. A journey that set us on a mission to change the world of sports nutrition."
    },
    {
        name: "Easle",
        url: "https://www.easle.co",
        tidyurl: "easle.co",
        image: "images/team_assets/fund/easle_image.jpg",
        logo: "images/team_assets/fund/easle_logo.png",
        line: "A freelancer platform getting artists hired",
        copy: "We find the best work for the best artists. Our creators are vetted by industry experts, and we take care of all the tedious paperwork like timesheets, contracts and invoices."
    },
    {
        name: "Sanctus",
        url: "https://sanctus.io",
        tidyurl: "sanctus.io",
        image: "images/team_assets/fund/sanctus_image.jpg",
        logo: "images/team_assets/fund/sanctus_logo.png",
        line: "Changing the perception of mental health",
        copy: "We believe mental health should be viewed like your physical health, and are on a mission to make it accessible. We work with businesses to help them create an open environment where mental health is accepted, and create content to further this goal."
    },
    {
        name: "Sidestory",
        url: "https://sidestory.co",
        tidyurl: "sidestory.co",
        image: "images/team_assets/fund/sidestory_image.jpg",
        logo: "images/team_assets/fund/sidestory_logo.png",
        line: "Curated immersive experiences, led by insiders",
        copy: "Now owned by <a href='https://www.mrandmrssmith.com/' target='_blank' style='color: #444; text-decoration:  underline;'>Mr & Mrs Smith</a>. A SideStory Experience is just you and the Insider discovering a particular neighbourhood or theme in great detail: they'll show you hidden gems and introduce you to the key movers and shakers in the industry, from food to architecture to art."
    },
    {
        name: "Tray",
        url: "https://www.tray.io",
        tidyurl: "tray.io",
        image: "images/team_assets/fund/tray_image.jpg",
        logo: "images/team_assets/fund/tray_logo.png",
        line: "A beautiful integration platform for cloud apps",
        copy: "We’ve made a secure and easy to use tool to let you automate any process across any cloud stack, without limits. From simple processes to multi step workflows with conditional logic, we’ve got you covered."
    },
    {
        name: "Uptree",
        url: "https://www.uptree.co",
        tidyurl: "uptree.co",
        image: "images/team_assets/fund/uptree_image.jpg",
        logo: "images/team_assets/fund/uptree_logo.png",
        line: "A career mobility platform for school students",
        copy: "We are providing students with an online resource to find early career events, internship and jobs to launch their future pathway."
    },
    {
        name: "Dojo",
        url: "https://www.dojoapp.co",
        tidyurl: "dojoapp.co",
        image: "images/team_assets/fund/dojo_image.jpg",
        logo: "images/team_assets/fund/dojo_logo.png",
        line: "The best places and events in your city",
        copy: "With editorial selections, high quality reviews, and insider info, our magazine style guide tells you whats going on daily and weekly, so you know what to enjoy."
    },
    {
        name: "Hoop",
        url: "https://www.hoop.co.uk",
        tidyurl: "hoop.co.uk",
        image: "images/team_assets/fund/hoop_image.jpg",
        logo: "images/team_assets/fund/hoop_logo.png",
        line: "Find the best things going on for kids",
        copy: "The tool families need to search for events and activities that their kids will love, along with curated content."
    },
    {
        name: "Everpress",
        url: "https://www.everpress.com",
        tidyurl: "everpress.com",
        image: "images/team_assets/fund/everpress_image.jpg",
        logo: "images/team_assets/fund/everpress_logo.png",
        line: "Design and sell beautiful merchandise easily",
        copy: "The best way to create and share campaigns for clothing design, risk free and high quality. We’re enabling the newest wave of influencers to sell products to millions of consumers around the world."
    },
    {
        name: "Curiscope",
        url: "https://www.curiscope.com",
        tidyurl: "curiscope.com",
        image: "images/team_assets/fund/curiscope_image.jpg",
        logo: "images/team_assets/fund/curiscope_logo.png",
        line: "Educational experiences built for all ages",
        copy: "We’re creating products using immersive technology like 360° video and AR to let you explore the depths of the ocean or the human body, and unleash your curiosity."
    },
    {
        name: "Amaliah",
        url: "https://www.amaliah.com",
        tidyurl: "amaliah.com",
        image: "images/team_assets/fund/amaliah_image.jpg",
        logo: "images/team_assets/fund/amaliah_logo.png",
        line: "Amplifying the voices of muslim women",
        copy: "We create content that is culturally relevant to Muslim women across fashion, beauty, topical issues, lifestyle and more."
    },
    {
        name: "Mayku",
        url: "https://www.mayku.me",
        tidyurl: "mayku.me",
        image: "images/team_assets/fund/mayku_image.jpg",
        logo: "images/team_assets/fund/mayku_logo.png",
        line: "Make beautiful things with the FormBox",
        copy: "The most compact vacuum former ever made, letting you start a production line from your desktop. There's no end to the things you can make, It lets you bring your ideas into the world, fast."
    },
    {
        name: "Marvel",
        url: "https://www.marvelapp.com",
        tidyurl: "marvelapp.com",
        image: "images/team_assets/fund/marvel_image.jpg",
        logo: "images/team_assets/fund/marvel_logo.png",
        line: "Mobile and web prototyping for designers",
        copy: "Design in Marvel or other tools, add your interactions and gestures to make the designs come to life, and collaborate with your team. We’ve built the best way for designers to to their thing."
    },
    {
        name: "Dice",
        url: "https://www.dice.fm",
        tidyurl: "dice.fm",
        image: "images/team_assets/fund/dice_image.jpg",
        logo: "images/team_assets/fund/dice_logo.png",
        line: "Tickets to the best gigs, with style",
        copy: "Every feature on DICE is designed for discovery and to make going out easy. We bring you closer to the artists you love. Every event on the app is handpicked by our team, with great copy and design to boot."
    },
    {
        name: "Pauseable",
        url: "https://www.pauseable.com",
        tidyurl: "pauseable.com",
        image: "images/team_assets/fund/pauseable_image.jpg",
        logo: "images/team_assets/fund/pauseable_logo.png",
        line: "Mindfulness in motion",
        copy: "We’re creating tools to bring mindfulness to everyone everywhere, through interactive meditation, unlocking an oasis of calm via a series of simple movements."
    },
    {
        name: "Over",
        url: "https://www.madewithover.com",
        tidyurl: "madewithover.com",
        image: "images/team_assets/fund/over_image.jpg",
        logo: "images/team_assets/fund/over_logo.png",
        line: "Inspiring the world to create",
        copy: "At Over, we believe that no matter who or where you are, you should be able to pick up your phone, open our app and design whatever you need. We want creating to be fast and easy, but most importantly we want it to be fun."
    },
    {
        name: "Run an Empire",
        url: "https://www.runanempire.com",
        tidyurl: "runanempire.com",
        image: "images/team_assets/fund/runanempire_image.jpg",
        logo: "images/team_assets/fund/runanempire_logo.png",
        line: "A real world strategy running game",
        copy: "The most fun way to get on the road. Race against people in the real world to control territory in your area, and claim land in the name of your empire."
    },
    {
        name: "Brother Cycles",
        url: "https://www.brothercycles.com/",
        tidyurl: "brothercycles.com",
        image: "images/team_assets/fund/brothercycles_image.jpg",
        logo: "images/team_assets/fund/brothercycles_logo.png",
        line: "Beautiful bikes, designed in London",
        copy: "Our frames are designed by us, are handmade by experienced frame builders out of the best materials, and can be ridden all day, whether in the city, on the track or out in the wild."
    },
    {
        name: "Seed and Spark",
        url: "https://www.seedandspark.com/",
        tidyurl: "seedandspark.com",
        image: "images/team_assets/fund/seedandspark_image.jpg",
        logo: "images/team_assets/fund/seedandspark_logo.png",
        line: "Look through different lenses",
        copy: "A new kind of streaming service where perspective matters, combining streaming for audiences with crowdfunding for creators. Our mission is to create an entertainment landscape that reflects what we actually look like."
    },
    {
        name: "Kyra",
        url: "https://kyra.com/",
        tidyurl: "kyra.com",
        image: "images/team_assets/fund/kyra_image.jpg",
        logo: "images/team_assets/fund/kyra_logo.png",
        line: "A new age TV network",
        copy: "We are reimagining TV for the digital world. We make TV quality, brand safe, original content franchises that brands can use to speak to an already engaged audience."
    },
    {
        name: "Limbic",
        url: "https://limbic.ai/",
        tidyurl: "limbic.ai",
        image: "images/team_assets/fund/limbic_image.png",
        logo: "images/team_assets/fund/limbic_logo.png",
        line: "Humanising Computing",
        copy: "We've created an SDK for emotional intelligence. Using AI models we want to enable products that interact with users as naturally as the interactions between two humans."
    },
    {
        name: "Superhi",
        url: "https://www.superhi.com/?utm_campaign=ustwo_adventure_sh_profile&utm_medium=promo&utm_source=ustwo_adventure",
        tidyurl: "superhi.com",
        image: "images/team_assets/fund/superhi_image.jpg",
        logo: "images/team_assets/fund/superhi_logo.png",
        line: "Online Courses For Creative People To Learn + Grow",
        copy: "A community of inspiring people from over 50 countries learning new tech skills to complement and enhance what they're already great at. Courses = Foundation HTML, CSS + Javascript, WordPress Design + Development, Advanced CSS + Javascript, Ruby on Rails, React.js"
    }
];


const lzy = (offset = 400) => {
    const images = document.querySelectorAll("[data-src]");
    const observer = new IntersectionObserver(onIntersection, {
        rootMargin: `${offset}px ${offset}px`,
        threshold: 0.01
    });
    function loadImage(imageEl) {
        imageEl.setAttribute("src", imageEl.getAttribute("data-src"));
        imageEl.removeAttribute("data-src");
    }
    images.forEach(image => observer.observe(image));
    function onIntersection(entries) {
        entries.forEach(entry => {
            if (entry.intersectionRatio > 0) {
                observer.unobserve(entry.target);
                loadImage(entry.target);
            }
        });
    }
};

const kebabCase = string => {
    return string.replace(/([a-z])([A-Z])/g, "$1-$2")
                 .replace(/[\s_]+/g, "-")
                 .toLowerCase();
};

const shuffle = a => {
    for (let i = a.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [a[i], a[j]] = [a[j], a[i]];
    }
    return a;
};

const createPortfolioItems = a => a.map(obj => {
    return `
        <a class="portfolio-item" href="#modal-${ kebabCase(obj.name) }" target="_blank" rel="modal:open">
            <p class="name">${ obj.name }</p>
            <img data-src="${ obj.image }">
            <p class="copy">${ obj.line }</p>
        </a>
    `;
});

const createModals = a => a.map(obj => {
    return `
        <div id="modal-${ kebabCase(obj.name) }">
            <div class="modal-inner">
                <div class="modal-details">
                    <h2>${ obj.name }</h2>
                    <a class="modal-site-link" href="${ obj.url }" target="_blank">${ obj.tidyurl }</a>
                    <p class="line">${ obj.line }</p>
                    <p class="copy">${ obj.copy }</p>
                </div>
                <div class="modal-image">
                    <img class="modal-image-background" src="" data-src="${ obj.image }"/>
                    <a href="${ obj.url }" target="_blank"> <img class="modal-image-logo" src="${ obj.logo }"/> </a>
                </div>
            </div>
        </div>
    `;
});



const latestInvestment = portfolioArray[portfolioArray.length - 1];
const latestInvestmentContainer = document.querySelector(".latest-investment");

latestInvestmentContainer.innerHTML = `
    <a href="portfolio.html/?${ latestInvestment.name }">
        <p class="tag">Latest investment:</p>
        <img src="${ latestInvestment.image }">
        <h1>${ latestInvestment.name }</h1>
        <p class="copy">${ latestInvestment.line }</p>
    </a>
`;



const portfolioMinusLatest = portfolioArray.slice(0, portfolioArray.length - 1);
const portfolioPreviewItems = shuffle(portfolioMinusLatest).slice(0, 5);
const portfolioPreview = createPortfolioItems(portfolioPreviewItems);
const portfolioPreviewContainer = document.querySelector(".portfolio-preview");

portfolioPreviewContainer.innerHTML = portfolioPreview.join("");



const portfolioItems = createPortfolioItems(shuffle(portfolioArray));
const portfolioModals = createModals(portfolioArray);



lzy();



const logoAdventure = document.querySelector("header .logo");
const logoUstwo = document.querySelector("header .logo img");

window.addEventListener("deviceorientation", e => {
    const tilt = (window.innerHeight > window.innerWidth) ? e.gamma / 2 : e.beta;
    const cappedTilt = Math.max(-45, Math.min(25, tilt));

    logoAdventure.style.transition = "transform 3s cubic-bezier(0.6, 0, 0.5, 1)";
    logoUstwo.style.transition = "transform 3s cubic-bezier(0.6, 0, 0.5, 1)";
    logoAdventure.style.transform = `rotate(${-(cappedTilt + 10)}deg)`;
    logoUstwo.style.transform = `rotate(${(cappedTilt + 10)}deg)`;
});




const footerADV = document.querySelectorAll("footer .left .ADV span");

footerADV.forEach(letter => {
    const moveLetter = () => {
        const x = 10 * (Math.floor(Math.random() * 4)) - 10;
        const y = 10 * (Math.floor(Math.random() * 4)) - 10;

        letter.style.transform = `translate(${x}px, ${y}px)`;
    };

    letter.addEventListener("mouseover", () => moveLetter());
    letter.addEventListener("click", () => moveLetter());
});
